name: klay-beam

channels:
  - defaults
  - conda-forge
  - pytorch

# IMPORTANT: THERE ARE MULTIPLE ENVIRONMENT FILES IN THIS REPO!!
#
# Are you making a change??? UPDATE THEM ALL!!!!!!!!!!!!!!!!!!!!

dependencies:
  - pip
  - python=3.10
  # ffmpeg 4.4 is required for torchaudio
  - ffmpeg<5
  # libiconv and xorg-libxau are required for ffmpeg
  - libiconv
  - xorg-libxau
  # libsndfile 1.2.0 is required for the soundfile pip package
  - libsndfile>=1.2.0
  # pytorch deps initially copied from klay-music/audiolm
  - pytorch>=1.11
  - torchaudio
  - pip:
    - -e '../klay_beam[code-style, tests, type-check]'
    # IMPORTANT: If you are changing submodules, make sure to also update the Dockerfile
    - -e '../submodules/klay-data[torch, type-check]'
