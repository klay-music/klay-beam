name: klay-beam-py310

channels:
  - defaults
  - conda-forge
  - pytorch

# IMPORTANT: THERE ARE MULTIPLE ENVIRONMENT FILES IN THIS REPO!!
#
# Are you making a change??? UPDATE THEM ALL!!!!!!!!!!!!!!!!!!!!

dependencies:
  - pip
  - python=3.10
  # ffmpeg 4.4 is required for torchaudio
  - ffmpeg<5
  # libiconv and xorg-libxau are required for ffmpeg
  - libiconv
  - xorg-libxau
  # libsndfile 1.2.0 is required for the soundfile pip package
  - libsndfile>=1.2.0
  # pytorch deps initially copied from klay-music/audiolm
  - pytorch>=2.0
  - torchaudio
  - pip:
    # IMPORTANT: In the local environment, the local packages below are
    # installed via conda (this file). The remote workers get these packages in
    # the Docker image.
    #
    # TLDR: The local packages below should be the same as the ones installed by
    # the py310 Dockerfile. When running remotely, you may use --setup_file to
    # install at most one of the packages below.
    - -e '../klay_beam[code-style, tests, type-check]'
    - -e '../job_encodec[code-style, tests, type-check]'
    - -e '../submodules/klay-data[torch, type-check]'
